<!DOCTYPE html>

<html lang="zh-Hant">
<head>
<meta charset="utf-8"/>
<title>é—œéµè·ä½ç•«åƒ</title>
<style>
    body { font-family: "Noto Sans TC", sans-serif; padding: 2rem; line-height: 1.6; }
    h1, h2, h3 { margin-top: 1.5rem; }
    .section { margin-top: 1.5rem; }
    .score-table { width: 100%; border-collapse: collapse; margin-top: 0.5rem; }
    .score-table th, .score-table td {
      border: 1px solid #ccc;
      padding: 0.5rem;
      vertical-align: top;
    }
    .meta { font-size: 0.9rem; color: #666; }
  </style>
</head>
<body>
<h1>ğŸ“Œ é—œéµå´—ä½ç•«åƒ</h1>
<p class="meta">åŒ¯å‡ºæ™‚é–“ï¼š<span id="timestamp"></span></p>
<div id="roleContent"></div>
<script>
  // é¡¯ç¤ºåŒ¯å‡ºæ™‚é–“
  document.getElementById("timestamp").textContent = new Date().toLocaleString("zh-TW");

  const index = new URLSearchParams(window.location.search).get("index");
  const roles = JSON.parse(localStorage.getItem("roles") || "[]");
  const role = roles[index];

  if (!role) {
    document.getElementById("roleContent").innerHTML = "<p>æŸ¥ç„¡è·ä½è³‡æ–™ã€‚</p>";
  } else {
    const content = document.getElementById("roleContent");

    const sectionHTML = (title, items) => `
      <h3>${title}</h3>
      ${items.map(item => `
        <div class="section">
          <strong>${item.title}</strong>
          <p>${item.desc}</p>
          <table class="score-table">
            <thead><tr><th>åˆ†æ•¸</th><th>æè¿°</th></tr></thead>
            <tbody>
              ${item.scores.map(s => {
                const [score, desc] = s.split("åˆ†ï¼š");
                return `<tr><td>${score}åˆ†</td><td>${desc}</td></tr>`;
              }).join("")}
            </tbody>
          </table>
        </div>
      `).join("")}
    `;

    content.innerHTML = `
      <h2>ğŸ“Œ è·ä½åç¨±ï¼š${role.role}</h2>
      <p>${role.description}</p>

      <h3>ğŸ¯ ç¡¬æŒ‡æ¨™</h3>
      ${["edu", "exp", "skill"].map(key => `
        <div class="section">
          <strong>${key === "edu" ? "å­¸æ­·" : key === "exp" ? "ç¶“æ­·" : "å°ˆæ¥­æŠ€èƒ½"}</strong>
          <p>${role.hard[key].desc}</p>
          <table class="score-table">
            <thead><tr><th>åˆ†æ•¸</th><th>æè¿°</th></tr></thead>
            <tbody>
              ${role.hard[key].scores.map(s => {
                const [score, desc] = s.split("åˆ†ï¼š");
                return `<tr><td>${score}åˆ†</td><td>${desc}</td></tr>`;
              }).join("")}
            </tbody>
          </table>
        </div>
      `).join("")}

      ${sectionHTML("ğŸŒŸ è»Ÿå¯¦åŠ›", role.soft)}
      ${sectionHTML("ğŸ’¡ äººæ ¼ç‰¹è³ª", role.trait)}
      ${sectionHTML("âš ï¸ æ‡‰é¿å…ç‰¹è³ª", role.avoid)}
    `;
  }
</script>
<!-- åŒ¯å‡º PDF æŒ‰éˆ• -->
<button onclick="window.print()" style="margin-top: 2rem; padding: 0.5rem 1rem;">ğŸ“¥ åŒ¯å‡ºè·ä½ç•«åƒ PDF</button>
<!-- ğŸ“¥ åŒ¯å‡º PDF æŒ‰éˆ• -->
<button onclick="exportPDF()" style="margin-top: 2rem; padding: 0.5rem 1rem;">ğŸ“¥ åŒ¯å‡ºè·ä½ç•«åƒ PDF</button>
<!-- è¼‰å…¥ html2pdf.js å¥—ä»¶ -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<script>
  function exportPDF() {
    const titleElement = document.querySelector("h2");
    const roleName = titleElement ? titleElement.innerText.replace("ğŸ“Œ è·ä½åç¨±ï¼š", "").trim() : "æœªå‘½åè·ä½";
    const filename = `è·ä½ç•«åƒ_${roleName}.pdf`;

    const element = document.body; // åŒ¯å‡ºæ•´é 
    const opt = {
      margin: 0.5,
      filename: filename,
      image: { type: "jpeg", quality: 0.98 },
      html2canvas: { scale: 2 },
      jsPDF: { unit: "in", format: "a4", orientation: "portrait" }
    };

    html2pdf().set(opt).from(element).save();
  }
</script>
<hr/>
<p style="text-align: center; font-size: 12px; color: gray;">
  ğŸš€ æœ¬é ç‰ˆæœ¬ï¼šv20250507 ï½œ Generated on 2025/05/07
</p>
</body>
</html>
<hr/>
<p style="text-align: center; font-size: 12px; color: gray;">
  ğŸš€ æœ¬é ç‰ˆæœ¬ï¼šv20250507 ï½œ Generated on 2025/05/07
</p>


